@model TransactionInfo.Models.ViewModels.TransactionsDataVM
<!--

@foreach(var data in Model.TransactionList)
{
    <h1>@data.Product_Name</h1>
}
-->
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Example</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <div class="container-fluid top-sect">
        <div class="row col-12">
            <div class="row col-2 top-value m-4 p-3">
                <div class="no-overflow">
                    <p>MVP</p>
                    <h2 class="text-wrap wrap-text">@Model.TransactionMVP.Transaction_Values</h2>
                    <p>@Model.TransactionMVP.Product_Name</p>
                </div>
                <div class="inner-sect">
                    <img class="image" src="~/images/money-bag-svgrepo-com (2).svg" />
                </div>
            </div>
            <div class="row col-2 top-value m-4 p-3">
                <div class="no-overflow">
                    <p>MUP</p>
                    <h2 class="text-wrap wrap-text">@Model.TransactionMUP.Transaction_Count</h2>
                    <p>@Model.TransactionMUP.Product_Name</p>
                </div>
                <div class="inner-sect">
                    <img class="image" src="~/images/pie-chart-piechart-stats-analytics-svgrepo-com.svg" />
                </div>
            </div>
            <div class="row col-2 top-value m-4 p-3">
                <div class="no-overflow">
                    <p>MEP</p>
                    <h2 class="text-wrap wrap-text">@(Model.PURatio.Transaction_Values / Model.PURatio.Transaction_Count)</h2>
                    <p>@Model.PURatio.Product_Name</p>
                </div>
                <div class="inner-sect">
                    <img class="image" src="~/images/efficiency-system-production-productivity-svgrepo-com (1).svg" />
                </div>
            </div>
            <div class="row col-2 top-value m-4 p-3">
                <div class="no-overflow">
                    <p>Total Value</p>
                    <h2 class="text-wrap wrap-text">@Model.TotalValue</h2>
                    <p>Ghana Cedis</p>
                </div>
                <div class="inner-sect">
                    <img class="image" src="~/images/chart-upward-svgrepo-com.svg" />
                </div>
            </div>
            <div class="row col-2 top-value m-4 p-3">
                <div class="no-overflow">
                    <p>Total Processed</p>
                    <h2 class="text-wrap wrap-text">@Model.TotalTransactions</h2>
                    <p>Transactions</p>
                </div>
                <div class="inner-sect">
                    <img class="image" src="~/images/check-circle-svgrepo-com.svg" />
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="container-fluid col-12">
        <div class="row col-12">
            <div class="gbox01">
                <div class="graph01">
                    <canvas id="myChart1"></canvas>
                </div>
            </div>
            <div class="gbox02">
                <div class="graph02">
                    <canvas class="graph" id="myChart2"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12">
        <div class="card shadow border-0 mt-4">
            <div class="card-body p-4 border-0">
                <div class="row pb-3">
                    <div class="col-6"></div>
                    <div class="col-6 text-end">
                        <a href="/TransactionsData/DownloadCSV" class="btn btn-primary download"> Download Data</a>
                    </div>
                </div>
                <div class="col-12">
                    <table id="tblData" class="col-12 table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>
                                    Product Name
                                </th>
                                <th>
                                    Transactions Value
                                </th>
                                <th>
                                    Transactions Count
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="//cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="~/js/transaction.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript">
        console.log("JS executed")
        $(function () {
            $.ajax({
                type: "GET",
                url: "/TransactionsData/GetTransactionValues",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var labels = data.data[0];
                    var values = data.data[1];
                    var labels2 = data.data[2];
                    var values2 = data.data[3];

                    var barColor = ["mediumaquamarine"];

                    new Chart("myChart1", {
                        type: "bar",
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Volumes',
                                backgroundColor: "#A94438",

                                data: values
                            }]
                        }
                    });
                    new Chart("myChart2", {
                        type: "bar",
                        data: {
                            labels: labels2,
                            datasets: [{
                                label: 'Usage',
                                backgroundColor: "#A94438",
                                data: values2
                            }]
                        }
                    });
                },
                error: function (xhr, status, error) {
                    console.error("Error fetching transaction values:", error);
                }
            });
        });
    </script>
</body>
</html>